<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/5408110.js"></script><script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5BSW555');
      </script><script>
      (function() {
        var routes = {"/almacare":"/enterprise-support-for-almalinux/","/service-descriptions/#almacare":"/enterprise-support-for-almalinux/#essential-and-enhanced-support","/eportal/#almacare-cybersecurity-patch-management":"/eportal/#live-patching-for-almalinux-kernelcare-and-libcare-management","/eportal/#deploying-almacare-almacare-cybersecurity":"/eportal/#deploying-essential-support-live-patching-for-almalinux","/endless-lifecycle-support-for-languages/":"/els-for-languages/","/endless-lifecycle-support-for-languages":"/els-for-languages","/endless-lifecycle-support":"/els-for-os","/endless-lifecycle-support/":"/els-for-os/","/els-for-languages/#installation-instructions-of-yum-repositories":"/els-for-languages/#installation-instructions-for-linux","/els-for-languages/#rhel-based-systems":"/els-for-languages/#rpm-based-systems","/els-for-languages/#ubuntu":"/els-for-languages/#deb-based-systems","/els-for-languages/#supported-os":"/els-for-languages/#supported-os-and-php-versions","/els-for-languages/#supported-versions":"/els-for-languages/#supported-os-and-php-versions","/els-for-languages/#step-2-create-an-account-on-npmjs-com":"/els-for-languages/#step-3-set-up-els-for-angular-16"};
    
        for (var route_url in routes) {
          if (window.location.href.indexOf(route_url) !== -1) {
            window.location.href = routes[route_url];
          }
        }
      })();
      </script><script>
                    (function() {
                      // Trigger the scroll event without actually scrolling
                      function triggerScrollEvent() {
                        const targetElement = window;
                        const scrollEvent = new Event('scroll', {
                          bubbles: true,
                          cancelable: true,
                        });
                        targetElement.dispatchEvent(scrollEvent);
                      }
              
                      // Call the triggerScrollEvent and scrollBodyDown functions after the page is fully loaded
                      window.addEventListener('load', () => {
                        triggerScrollEvent();
                      });
                    })();
                  </script><title>ePortal API</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-6195e872.css" as="style"><link rel="stylesheet" href="/assets/style-6195e872.css">
    <link rel="modulepreload" href="/assets/app-3361cae0.js"><link rel="modulepreload" href="/assets/framework-1d7fbccb.js"><link rel="modulepreload" href="/assets/index.html-1ca25907.js"><link rel="modulepreload" href="/assets/index.html-8d714e25.js"><link rel="prefetch" href="/assets/index.html-2c57371e.js" as="script"><link rel="prefetch" href="/assets/index.html-dc811ac9.js" as="script"><link rel="prefetch" href="/assets/index.html-ea680e2b.js" as="script"><link rel="prefetch" href="/assets/index.html-550a0ffa.js" as="script"><link rel="prefetch" href="/assets/index.html-d168ea36.js" as="script"><link rel="prefetch" href="/assets/index.html-092f14d9.js" as="script"><link rel="prefetch" href="/assets/index.html-e1c111f0.js" as="script"><link rel="prefetch" href="/assets/index.html-a67c3dff.js" as="script"><link rel="prefetch" href="/assets/index.html-cea51d54.js" as="script"><link rel="prefetch" href="/assets/index.html-d5e6f75c.js" as="script"><link rel="prefetch" href="/assets/index.html-c5914df6.js" as="script"><link rel="prefetch" href="/assets/index.html-448a5efa.js" as="script"><link rel="prefetch" href="/assets/index.html-6c9650cc.js" as="script"><link rel="prefetch" href="/assets/index.html-55653af3.js" as="script"><link rel="prefetch" href="/assets/index.html-e7ada822.js" as="script"><link rel="prefetch" href="/assets/index.html-d924646e.js" as="script"><link rel="prefetch" href="/assets/index.html-e56cdeb6.js" as="script"><link rel="prefetch" href="/assets/index.html-71fb4d10.js" as="script"><link rel="prefetch" href="/assets/index.html-bfb306f5.js" as="script"><link rel="prefetch" href="/assets/index.html-04265117.js" as="script"><link rel="prefetch" href="/assets/index.html-c09eba5b.js" as="script"><link rel="prefetch" href="/assets/index.html-45ca0bbf.js" as="script"><link rel="prefetch" href="/assets/index.html-070c63b3.js" as="script"><link rel="prefetch" href="/assets/index.html-270136ce.js" as="script"><link rel="prefetch" href="/assets/index.html-e424f433.js" as="script"><link rel="prefetch" href="/assets/404.html-e0575d4e.js" as="script"><link rel="prefetch" href="/assets/index.html-0c564990.js" as="script"><link rel="prefetch" href="/assets/index.html-fe4e5549.js" as="script"><link rel="prefetch" href="/assets/index.html-533f1557.js" as="script"><link rel="prefetch" href="/assets/index.html-c0e24f27.js" as="script"><link rel="prefetch" href="/assets/index.html-86288f4f.js" as="script"><link rel="prefetch" href="/assets/index.html-545037f1.js" as="script"><link rel="prefetch" href="/assets/index.html-898bd75f.js" as="script"><link rel="prefetch" href="/assets/index.html-a76f049a.js" as="script"><link rel="prefetch" href="/assets/index.html-55a10882.js" as="script"><link rel="prefetch" href="/assets/index.html-f65480cd.js" as="script"><link rel="prefetch" href="/assets/index.html-84bb6b1c.js" as="script"><link rel="prefetch" href="/assets/index.html-e01e18a6.js" as="script"><link rel="prefetch" href="/assets/index.html-6dc29dbe.js" as="script"><link rel="prefetch" href="/assets/index.html-f9388cc5.js" as="script"><link rel="prefetch" href="/assets/index.html-79310cf4.js" as="script"><link rel="prefetch" href="/assets/index.html-6ceae193.js" as="script"><link rel="prefetch" href="/assets/index.html-53a79655.js" as="script"><link rel="prefetch" href="/assets/index.html-5c5de709.js" as="script"><link rel="prefetch" href="/assets/index.html-108ff0a0.js" as="script"><link rel="prefetch" href="/assets/index.html-3bedd205.js" as="script"><link rel="prefetch" href="/assets/index.html-2089bcfd.js" as="script"><link rel="prefetch" href="/assets/index.html-cd78c957.js" as="script"><link rel="prefetch" href="/assets/index.html-52bc367a.js" as="script"><link rel="prefetch" href="/assets/index.html-db0f5c94.js" as="script"><link rel="prefetch" href="/assets/index.html-a8c1162b.js" as="script"><link rel="prefetch" href="/assets/404.html-f7b8d086.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar fixed"><div class="navbar-header"><div class="navbar-header__logo-wrapper"><a href="/" class="home-link"><img class="logo" src="/global/logo.svg" alt="logo header"></a><div class="header-layout__search-container header-mobile__hidden"><!----><form id="search-form" class="drawer-header__input"><input type="text" value="" id="algolia-search-input" placeholder="Search" class="header-layout__search-default" maxlength="100"><div class="header-layout__search-icon-default"><img alt="search icon" src="/global/search.svg"><!----></div></form><div><div class="drawer"><div class="drawer-header"><div class="drawer-header__wrapper"><h2 class="drawer-header__paragraph">How can we help you?</h2><div id="drawerSearch"></div></div><div class="drawer-cross"><img class="drawer-cross__img" src="/global/cross.svg" alt="cross"><p class="drawer-cross__text">close</p></div></div><main><div class="drawer-main"><div class="drawer-main__wrapper"><div class="drawer-main__breadcrumb"><!-- Optional breadcrumb can stay here --></div><div><p class="no_results">Please type your search query, then press Enter or click the search button.</p></div></div></div><!----></main></div><!----></div></div></div><div class="links" style="max-width:nullpx;"><img class="navbar-header__mobile-search" src="/global/search.svg" alt="icon image"><div class="header-products-wrapper"><div class="dropdown"><!----><!----><div class="header-products-container"><img class="header-products-container__img" alt="hamburger menu" src="/global/hamburger-menu.svg"><p class="header-products-wrapper-paragraph">Products</p><img class="products-icon__default" width="10" height="8" src="/arrows/arrow-down.svg" alt="arrow down icon"></div></div></div><!--[--><a href="https://www.tuxcare.com/support-portal/" target="_blank" class="btn">Submit support request</a><a href="https://features.tuxcare.com/submit-idea/" target="_blank" class="btn">Submit your idea</a><!--]--></div></div><!----></header><!----><div class="page"><!--[--><!--]--><div class="breadcrumb-wrapper page-breadcrumb" data-v-9445381a><span class="breadcrumb-title" data-v-9445381a>Documentation:</span><!--[--><a aria-current="page" href="/eportal-api/" class="router-link-active router-link-exact-active breadcrumb" data-v-9445381a>ePortal API</a><!--]--></div><img class="page-mobile__sidebar-menu" src="/global/sidebar-menu.svg" alt="sidebar hamburger menu"><div class="page-nav-wrapper"><!----></div><div class="content" custom="false"><h1 id="eportal-api" tabindex="-1"><a class="header-anchor" href="#eportal-api" aria-hidden="true">#</a> ePortal API</h1><p>You may need to create a separate ePortal account for API usage with:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>kc.eportal user -a api-user -p &lt;password&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>It can be useful for SSO/LDAP setups to be able to pass HTTP API credentials via basic auth.</p><p>Starting with version 2.14-1, an API key can be used for authentication as an alternative to basic authentication. First, you need to generate an API token using ePortal admin UI. Then you can put it in the <em>X-Api-Key</em> http header. In this case the Authorization header is no longer needed. If for some reason the &quot;X-Api-Key&quot; header doesn&#39;t work for you, you can define your own header name in the API_AUTH_HEADER setting in eportal.conf.</p><p>In general ePortal API is configuration management friendly and idempotent. You don&#39;t need to make additional request to check existing state. For example entity deletion doesn&#39;t raise an error in case there is no such entity. Or entity creation/modification is a single request that just works and simply brings desired final state.</p><h2 id="list-servers" tabindex="-1"><a class="header-anchor" href="#list-servers" aria-hidden="true">#</a> List servers</h2><p><strong>GET /admin/api/servers</strong></p><p>Filters servers on various criteria, iterate through list and get server counts.</p><p>Requires basic authorization with read only user permissions.</p><p><strong>Query string parameters:</strong></p><ul><li><code>hostname</code>: String, optional. Return servers with a hostname like value. Value can contain <code>%</code> placeholder to match any string.</li><li><code>ip</code>: String, optional. Return servers with IP like value. Value can contain <code>%</code> placeholder to match any string.</li><li><code>service_id</code>: String, optional. Return a single server with the service ID equal to the provided value.</li><li><code>feed</code>: String, optional. Return servers attached to feed. Use <code>main</code> for default feed.</li><li><code>key</code>: String, optional. Return servers registered to key.</li><li><code>registered_age</code>: Integer, optional. Return servers registered more than <code>registered_age</code> days ago. If <code>registered_age</code> is negative then return servers registered less or equal -<code>registered_age</code> days ago. For example: <code>registered_age=-3</code> means to return servers registered 3 or less days ago. Hours can be specified by adding <code>h</code> suffix: <code>registered_age=4h</code> selects servers registered more than 4 hours ago.</li><li><code>checkin_age</code>: Integer, optional. Return servers sent check-in more than <code>checkin_age</code> days ago. For negative values see <code>registered_age</code>.</li><li><code>updated_age</code>: Integer, optional. Return servers loaded patches more than <code>updated_age</code> days ago. For negative values see <code>registered_age</code>.</li><li><code>is_updated</code>: Boolean, optional. If <code>true</code> then return servers updated to latest available patches. If <code>false</code> return servers without latest patches.</li><li><code>limit</code>: Integer, optional. Limit result to a specified number of entries. By default <code>limit</code> is 10.</li><li><code>offset</code>: Integer, optional. Set result to a specified offset. <code>limit</code> and <code>offset</code> can be used to iterate through result.</li><li><code>only_count</code>: Boolean, optional. Return server count only.</li><li><code>tag</code>: String, optional. Adds filter by server tag. E.g <code>tag=env:test</code> or <code>tag=ubuntu</code>.</li></ul><p><strong>Response:</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
    &quot;count&quot;: 42,
    &quot;limit&quot;: 10,
    &quot;offset&quot;: 0,
    &quot;result&quot;: [
        {
            &quot;id&quot;: &quot;99c97tz44uKX13b5&quot;,
            &quot;ip&quot;: &quot;10.51.16.72&quot;,
            &quot;hostname&quot;: &quot;localhost.localdomain&quot;,
            &quot;key&quot;: &quot;some-key&quot;,
            &quot;feed&quot;: &quot;main&quot;,
            &quot;registered&quot;: &quot;2021-04-08 16:43:23.907671&quot;,
            &quot;checkin&quot;: &quot;2021-07-12 17:35:56.065077&quot;,
            &quot;updated&quot;: &quot;2021-06-01 16:37:03.000000&quot;,
            &quot;euname&quot;: &quot;3.10.0-1160.25.1.el7&quot;,        // effective kernel version
            &quot;release&quot;: &quot;3.10.0-957.5.1.el7.x86_64&quot;,  // installed kernel version
            &quot;kernel_id&quot;: &quot;9647204d2708cad906a75944ee56ac68fc5b5704&quot;,
            &quot;patch_level&quot;: 49,
            &quot;patch_type&quot;: &quot;default&quot;,
            &quot;tags&quot;: null,
            &quot;uptime&quot;: 6394092,
            &quot;version&quot;: &quot;#1 SMP Fri Feb 1 14:54:57 UTC 2019&quot;,
            &quot;virt&quot;: &quot;kvm&quot;,
            &quot;kcare_version&quot;: &quot;2.44-2&quot;,
            &quot;distro&quot;: &quot;CentOS Linux&quot;,
            &quot;distro_version&quot;: &quot;7.6.1810&quot;,
            &quot;machine&quot;: &quot;x86_64&quot;,
            &quot;processor&quot;: &quot;x86_64&quot;
        },
        ...
    ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="register-host" tabindex="-1"><a class="header-anchor" href="#register-host" aria-hidden="true">#</a> Register host</h2><p><strong>POST /admin/api/register</strong></p><p>Registers host by provided key and hostname.</p><p><strong>Form (urlencoded) parameters:</strong></p><ul><li><code>key</code>: String, required. ePortal key to use for registration.</li><li><code>hostname</code>: String, optional. Server&#39;s hostname to use.</li></ul><p><strong>Success response (200):</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
    &quot;server_id&quot;: &quot;some-server-id&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Error response (400):</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
    &quot;error&quot;: &quot;error code&quot; # invalid-key | key-limit-reached
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -X POST https://eportal.corp.com/admin/api/register -F key=test
{&quot;server_id&quot;:&quot;lw1MO1Du5sF3Cj39&quot;}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="unregister-host" tabindex="-1"><a class="header-anchor" href="#unregister-host" aria-hidden="true">#</a> Unregister host</h2><p><strong>POST /admin/api/delete_server</strong></p><p>Removes registered servers by IP, hostname or server_id</p><p>Requires basic authorization with admin user permissions.</p><p><strong>Query string parameters:</strong></p><ul><li><code>hostname</code>: String, optional. Server&#39;s hostname to delete.</li><li><code>ip</code>: String, optional. Server&#39;s IP to delete.</li><li><code>server_id</code>: String, optional. Server&#39;s id to delete.</li></ul><p>Endpoint requires at least one parameter <code>hostname</code>, <code>ip</code> or <code>server_id</code>.</p><p><strong>Response:</strong></p><p>Response contains number of deleted servers.</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
    &quot;result&quot;: 1
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>For example:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl --user admin:admin-password -X POST https://eportal.corp.com/admin/api/delete_server?ip=192.168.1.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Below are examples of using <code>/admin/api/delete_server</code> endpoint with various CM products. Take note, you need a host IP, a hostname or a server_id to delete it via API. It can be more convenient to use on of:</p><ul><li>if you have an access to a host (it is alive) it&#39;s a way more simpler to call <code>kcarectl --unregister</code> to delete the host.</li><li>if host is already destroyed you can consider using bulk <a href="#clean-inactive-servers">inactive server cleanup</a>.</li></ul><h2 id="bulk-unregister-hosts" tabindex="-1"><a class="header-anchor" href="#bulk-unregister-hosts" aria-hidden="true">#</a> Bulk unregister hosts</h2><p><strong>DELETE /admin/api/servers</strong></p><p>Removes registered servers by the latest check-in age.</p><p>Requires basic authorization with admin user permissions.</p><p><strong>Query string parameters:</strong></p><ul><li><code>checkin_age</code>: Integer, required, greater or equal 1. Delete servers that sent latest check-in more than <code>checkin_age</code> days ago.</li></ul><p><strong>Response:</strong></p><p>Response contains number of deleted servers.</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
    &quot;result&quot;: 1200
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>For example:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl --user admin:admin-password -X DELETE https://eportal.corp.com/admin/api/servers?checkin_age=15
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="create-modify-feed" tabindex="-1"><a class="header-anchor" href="#create-modify-feed" aria-hidden="true">#</a> Create/modify feed</h2><p><strong>POST /admin/api/feeds/</strong></p><p>If feed already exists request modifies it.</p><p>Requires write permissions and accepts basic authorization.</p><p><strong>Query string/Form/JSON parameters:</strong></p><ul><li><code>name</code>: String, required. Name of created or modified feed.</li><li><code>auto</code>: Boolean, optional. Sets auto-update property. Default is false.</li><li><code>deploy_after</code>: Integer, optional. Sets delayed period in hours. Default is 0 (not delayed).</li><li><code>channel</code>: String, optional. Sets patchset channel to use. Default is <code>default</code>. Available channels: <ul><li><code>default</code>: stable patches.</li><li><code>test</code>: testing patches.</li></ul></li></ul><p><strong>Response:</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
  &quot;result&quot;: {
    &quot;name&quot;: &quot;test-feed&quot;,
    &quot;auto&quot;: true,
    &quot;deploy_after&quot;: 0
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -X POST -u admin -d name=test-feed -d auto=true https://eportal.corp.com/admin/api/feeds/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="list-feeds" tabindex="-1"><a class="header-anchor" href="#list-feeds" aria-hidden="true">#</a> List feeds</h2><p><strong>GET /admin/api/feeds/</strong></p><p>Returns list of existing feeds. Take note: <code>main</code> feed is alway present and couldn&#39;t be modified.</p><p>Requires read permissions and accepts basic authorization.</p><p><strong>Response:</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
  &quot;result&quot;: [
    {
      &quot;auto&quot;: false,
      &quot;deploy_after&quot;: 0,
      &quot;name&quot;: &quot;feed-name&quot;
    },
    ...
  ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -u admin https://eportal.corp.com/admin/api/feeds/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="delete-feed" tabindex="-1"><a class="header-anchor" href="#delete-feed" aria-hidden="true">#</a> Delete feed</h2><p><strong>DELETE /admin/api/feeds/:feed-name</strong></p><p>Requires write permissions and accepts basic authorization.</p><p><strong>Response:</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
  &quot;result&quot;: 1  // number of deleted records, 0 if there is no such feed.
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -X DELETE -u admin https://eportal.corp.com/admin/api/feeds/test-feed
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="create-modify-registration-key" tabindex="-1"><a class="header-anchor" href="#create-modify-registration-key" aria-hidden="true">#</a> Create/modify registration key</h2><p><strong>POST /admin/api/keys/</strong></p><p>If key already exists request modifies it.</p><p>Requires write permissions and accepts basic authorization.</p><p><strong>Query string/Form/JSON parameters:</strong></p><ul><li><code>key</code>: String, optional. Name of created or modified key. If it&#39;s empty random key is generated.</li><li><code>feed</code>: String, optional. Name of attached feed. <code>main</code> by default.</li><li><code>note</code>: String, optional. Description of the key.</li><li><code>server_limit</code>: Integer, optional. Advisory limit of a maximum number of hosts one can register on the key.</li></ul><p><strong>Response:</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
  &quot;result&quot;: {
    &quot;key&quot;: &quot;key&quot;,
    &quot;feed&quot;: &quot;feed-name&quot;,
    &quot;note&quot;: &quot;some-note&quot;,
    &quot;server_limit&quot;: 0
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -X POST -u admin -d key=test-key -d feed=test-feed https://eportal.corp.com/admin/api/keys/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="list-keys" tabindex="-1"><a class="header-anchor" href="#list-keys" aria-hidden="true">#</a> List keys</h2><p><strong>GET /admin/api/keys/</strong></p><p>Returns list of existing keys.</p><p>Requires read permissions and accepts basic authorization.</p><p><strong>Response:</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
  &quot;result&quot;: [
    {
      &quot;key&quot;: &quot;test&quot;,
      &quot;feed&quot;: &quot;main&quot;,
      &quot;note&quot;: null,
      &quot;server_limit&quot;: 0
    },
    ...
  ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -u admin https://eportal.corp.com/admin/api/keys/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="delete-key" tabindex="-1"><a class="header-anchor" href="#delete-key" aria-hidden="true">#</a> Delete key</h2><p><strong>DELETE /admin/api/keys/:key</strong></p><p>Requires write permissions and accepts basic authorization.</p><p><strong>Response:</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
  &quot;result&quot;: 1  // number of deleted records, 0 if there is no such key.
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -X DELETE -u admin https://eportal.corp.com/admin/api/keys/test-key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="list-patchsets" tabindex="-1"><a class="header-anchor" href="#list-patchsets" aria-hidden="true">#</a> List patchsets</h2><p><strong>GET /admin/api/patchsets/</strong></p><p>Endpoint lists available patchsets for a feed and product. Sort order is from oldest to newest patchsets.</p><p>Requires read permissions and accepts basic authorization.</p><p><strong>Query string parameters:</strong></p><ul><li><code>feed</code>: String, optional. Name of the feed to list patchsets for. <code>main</code> by default.</li><li><code>product</code>: String, optional. Possible values are: <code>kernel</code>, <code>user</code>, <code>qemu</code>, <code>db</code>. Selects a patchstore for a specified product. <code>kernel</code> by default.</li></ul><p><strong>Response:</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
  &quot;result&quot;: [
    {
      &quot;patchset&quot;: &quot;patchset-name&quot;,
      &quot;status&quot;: &quot;enabled&quot; // possible values are: enabled, disabled, not-downloaded, undeployed
    },
    ...
  ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -u admin &#39;https://eportal.corp.com/admin/api/patchsets/?feed=main&amp;product=kernel&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="manage-patchsets" tabindex="-1"><a class="header-anchor" href="#manage-patchsets" aria-hidden="true">#</a> Manage patchsets</h2><p><strong>POST /admin/api/patchsets/manage</strong></p><p>Allows to perform deploy actions on the patchsets.</p><p>Requires write permissions and accepts basic authorization.</p><p><strong>Query string parameters:</strong></p><ul><li><code>patchset</code>: String, required. Name of the patchset to operate on.</li><li><code>feed</code>: String, required. Name of the feed to operate on. Can be specified multiple times.</li><li><code>action</code>: String, requred. Operartion to perform: <ul><li><code>enable</code>: enable specified patchset.</li><li><code>disable</code>: disable specified patchset.</li><li><code>enable-upto</code>: enable all patchset up to (older than) specified.</li><li><code>undeploy-downto</code>: undeploy all patchsets down to (newer than) specified.</li></ul></li><li><code>product</code>: String, optional. Possible values are: <code>kernel</code>, <code>user</code>, <code>qemu</code>, <code>db</code>. Selects a patchstore for a specified product. <code>kernel</code> by default.</li></ul><p><strong>Response:</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
  &quot;result&quot;: &quot;ok&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example:</strong></p><p>Enable libcare patchset <code>U20200506_01</code> in <code>main</code> and <code>test-feed</code> feeds:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -X POST -u admin &#39;https://eportal.corp.com/admin/api/patchsets/manage?patchset=U20200506_01&amp;feed=main&amp;feed=test-feed&amp;product=user&amp;action=enable&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="list-users" tabindex="-1"><a class="header-anchor" href="#list-users" aria-hidden="true">#</a> List users</h2><p><strong>GET /admin/api/users/</strong></p><p>Returns list of existing users.</p><p>Requires read permissions and accepts basic authorization.</p><p><strong>Response:</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
  &quot;result&quot;: [
    {
      &quot;id&quot;: 1,
      &quot;username&quot;: &quot;test&quot;,
      &quot;description&quot;: &quot;test user&quot;,
      &quot;readonly&quot;: false
    },
    ...
  ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -u admin https://eportal.corp.com/admin/api/users/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="set-tags" tabindex="-1"><a class="header-anchor" href="#set-tags" aria-hidden="true">#</a> Set tags</h2><p><strong>POST /admin/api/set_tags</strong></p><p>Allows assign tags to server</p><p>Requires write permissions and accepts basic authorization.</p><p><strong>Query string parameters:</strong></p><ul><li><code>server_id</code>: String, required. ID of the server to attach tags.</li><li><code>tags</code>: String, optional. String with semicolon divided tags. If the parameter is not presented, all tags will be removed</li></ul><p>These parameters can also be provided in the JSON body with the header <code>Content-Type: application/json</code></p><p><strong>Response:</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
  &quot;result&quot;: &quot;ok&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example:</strong></p><p>Assign tags <code>test</code> and <code>stage</code> to server with id <code>test-centos</code></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -X POST -u admin &#39;https://eportal.corp.com/admin/api/set_tags?server_id=test-centos&amp;tags=test;stage&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="configuration-manager-integration" tabindex="-1"><a class="header-anchor" href="#configuration-manager-integration" aria-hidden="true">#</a> Configuration manager integration</h2><h3 id="ansible-playbook" tabindex="-1"><a class="header-anchor" href="#ansible-playbook" aria-hidden="true">#</a> Ansible playbook</h3><p>Integrating ePortal API access with Ansible is now possible. Rather than calling the kernelcare agent to perform tasks, it is possible to replace it with direct calls to ePortal to achieve the same results.</p><p>Unregister KernelCare agent through API playbook:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>- hosts: kernelcare
  vars:
    eportal_srv: http://eportal.address.here[:port if needed]

  tasks:
    - name: unregister kernelcare agent through API
      uri:
        url: &quot;{{ eportal_srv }}/admin/api/delete_server?ip={{ ansible_default_ipv4.address|default(ansible_all_ipv4_addresses[0]) }}&quot;
        method: POST
        user: your-api-user
        password: your-api-user-password
        force_basic_auth: yes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Example:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>- hosts: kernelcare
  vars:
    eportal_srv: http://192.168.246.110

  tasks:
    - name: unregister kernelcare agent through API
      uri:
        url: &quot;{{ eportal_srv }}/admin/api/delete_server?ip={{ ansible_default_ipv4.address|default(ansible_all_ipv4_addresses[0]) }}&quot;
        method: POST
        user: api-user
        password: dummy
        force_basic_auth: yes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Example of server tagging:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>- hosts: kernelcare
  vars:
    eportal_srv: http://192.168.246.110
    eportal_tags: &#39;staging;location:Boston&#39;
  tasks:
    - name: get systemid content
      slurp:
        src: /etc/sysconfig/kcare/systemid
      register: systemid_file

    - name: set server_id
      set_fact:
        eportal_server_id: &quot;{{ systemid_file.content | b64decode | trim | regex_replace(&#39;^server_id=(\\w+)$&#39;, &#39;\\1&#39;) }}&quot;

    - name: set server tags using ePortal API
      uri:
        url: &#39;{{ eportal_srv }}/admin/api/set_tags&#39;
        method: POST
        headers:
          X-Api-Key: &#39;{{ lookup(&quot;env&quot;, &quot;EPORTAL_API_TOKEN&quot;) }}&#39;
        body_format: form-urlencoded
        body:
          server_id: &#39;{{eportal_server_id }}&#39;
          tags: &#39;{{ eportal_tags }}&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ad hoc run with:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ansible-playbook -u ansible  ./kernelcare.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This can be called during machine tear down to properly remove the server from ePortal.</p><h3 id="chef-recipe" tabindex="-1"><a class="header-anchor" href="#chef-recipe" aria-hidden="true">#</a> Chef recipe</h3><p>Having tighter integration with automation tools like Chef has always been a goal for KernelCare and related tools like ePortal. The following recipe demonstrates how to use the delete_server api to correctly remove a server from ePortal during tear down, and can be integrated with your other recipes to avoid manual operations.</p><p>Unregister KernelCare agent through API recipe:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>eportal_url = &quot;EPORTAL URL&quot;
eportal_user = &quot;EPORTAL API USER NAME&quot;
eportal_password = &quot;EPORTAL API USER PASSWORD&quot;

# the ip to unregister can be pulled automatically from the system where the recipe is applied, or specified manually (by replacing the following line with a simple assignment)
ip_to_unregister = &quot;#{node[&#39;network&#39;][&#39;interfaces&#39;][node[&#39;network&#39;][&#39;default_interface&#39;]][&#39;addresses&#39;].select{|k,v| v[&#39;family&#39;] == &quot;inet&quot;}.keys.first}&quot;


http_request &quot;kernelcare-unregister-api&quot; do
  url &quot;#{eportal_url}/admin/api/delete_server?ip=#{ip_to_unregister}&quot;
  action :post
  headers({&#39;AUTHORIZATION&#39; =&gt; &quot;Basic #{
    Base64.encode64(&quot;#{eportal_user}:#{eportal_password}&quot;)}&quot;,
  })
end
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Example (kernelcare-unregister-api.rb):</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>eportal_url = &quot;http://192.168.246.110&quot;
eportal_user = &quot;api-user&quot;
eportal_password = &quot;dummy&quot;

ip_to_unregister = &quot;#{node[&#39;network&#39;][&#39;interfaces&#39;][node[&#39;network&#39;][&#39;default_interface&#39;]][&#39;addresses&#39;].select{|k,v| v[&#39;family&#39;] == &quot;inet&quot;}.keys.first}&quot;

http_request &quot;kernelcare-unregister-api&quot; do
  url &quot;#{eportal_url}/admin/api/delete_server?ip=#{ip_to_unregister}&quot;
  action :post
  headers({&#39;AUTHORIZATION&#39; =&gt; &quot;Basic #{
    Base64.encode64(&quot;#{eportal_user}:#{eportal_password}&quot;)}&quot;,
  })
end
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Example of server tagging (kernelcare-tag-server.rb):</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>eportal_url = &quot;http://192.168.246.110&quot;
eportal_api_key = &quot;Lgk5-qWeBypejSEc6nYmalGbv11Kh_OyWi2_vigrTro&quot;
tags = &quot;staging;location:Boston&quot;

ruby_block &#39;get-server-id&#39; do
  block do
    node.run_state[&#39;server_id&#39;] = File::read(&#39;/etc/sysconfig/kcare/systemid&#39;).gsub(/server_id=(\w+)\s*/, &#39;\1&#39;)
  end
  action :run
end

http_request &#39;kernelcare-set-server-tags&#39; do
  url &quot;#{eportal_url}/admin/api/set_tags&quot;
  action :post
  message lazy {{&#39;server_id&#39; =&gt; &quot;#{node.run_state[&#39;server_id&#39;]}&quot;, &#39;tags&#39; =&gt; tags}.to_json}
  headers({&#39;X-Api-Key&#39; =&gt; eportal_api_key, &#39;Content-Type&#39; =&gt; &#39;application/json&#39;})
end
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ad hoc run with:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>chef-apply kernelcare-unregister-api.rb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Output:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>Recipe: (chef-apply cookbook)::(chef-apply recipe)
  * http_request[kernelcare-unregister-api] action post
    - http_request[kernelcare-unregister-api] POST to http://192.168.246.110/admin/api/delete_server?ip=192.168.246.40
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This can be called during machine tear down to properly remove the server from ePortal.</p><h3 id="puppet-task" tabindex="-1"><a class="header-anchor" href="#puppet-task" aria-hidden="true">#</a> Puppet task</h3><p>Puppet provides the framework to run tasks on target systems. The following is a bash script that can run as such a task and demonstrates how to use the delete_server api to correctly remove a server from ePortal during tear down. It can be integrated with your other removal scripts or tasks to avoid manual operations.</p><p>Unregister KernelCare agent through API call:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#!/bin/bash

EPORTAL_API_USERNAME=&lt;your ePortal api user name&gt;
EPORTAL_API_PASSWORD=&lt;your ePortal api user password&gt;
EPORTAL_URL=&#39;your ePortal URL&#39;

#this is taken from the primary ip in the system. If awk is available, it is used, but a fallback using other common tools is also provided
if hash awk 2&gt;/dev/null; then
        IP_TO_UNREGISTER=`ip route get 1 | awk &#39;{print $(NF-2);exit}&#39;`     # using awk
else
        IP_TO_UNREGISTER=`ip route get 1 | cut -f 3 -d&quot; &quot;| head -1`        # simpler alternative for when awk is not available
fi

curl -kL -u &quot;${EPORTAL_API_PASSWORD}&quot;&#39;:&#39;&quot;${EPORTAL_API_PASSWORD}&quot; -X POST &quot;${EPORTAL_URL}&quot;&#39;/admin/api/delete_server?ip=&#39;&quot;${IP_TO_UNREGISTER}&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Example (unregister_server.sh):</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#!/bin/bash

EPORTAL_API_USERNAME=admin
EPORTAL_API_PASSWORD=admin
EPORTAL_URL=&#39;http://192.168.246.110&#39;

#this is taken from the primary ip in the system. If you want to pick a different one, adjust the next line.
if hash awk 2&gt;/dev/null; then
        IP_TO_UNREGISTER=`ip route get 1 | awk &#39;{print $(NF-2);exit}&#39;`     # using awk
else
        IP_TO_UNREGISTER=`ip route get 1 | cut -f 3 -d&quot; &quot;| head -1`        # simpler alternative for when awk is not available
fi

curl -kL -u &quot;${EPORTAL_API_PASSWORD}&quot;&#39;:&#39;&quot;${EPORTAL_API_PASSWORD}&quot; -X POST &quot;${EPORTAL_URL}&quot;&#39;/admin/api/delete_server?ip=&#39;&quot;${IP_TO_UNREGISTER}&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Example of server tagging (tag_server.sh)</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#!/bin/bash

EPORTAL_URL=&#39;http://192.168.246.110&#39;
EPORTAL_TAGS=&#39;staging;location:Boston&#39;
EPORTAL_API_KEY=&#39;Lgk5-qWeBypejSEc6nYmalGbv11Kh_OyWi2_vigrTro&#39;

EPORTAL_SERVER_ID=$( grep -oP &#39;server_id=\K(.+)&#39; /etc/sysconfig/kcare/systemid )

curl -kL -H &quot;X-Api-Key: ${EPORTAL_API_KEY}&quot; --data-urlencode &quot;server_id=${EPORTAL_SERVER_ID}&quot; --data-urlencode &quot;tags=${EPORTAL_TAGS}&quot; &quot;${EPORTAL_URL}/admin/api/set_tags&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="puppet-plan" tabindex="-1"><a class="header-anchor" href="#puppet-plan" aria-hidden="true">#</a> Puppet Plan</h3><p>If you prefer to have a plan rather than a task, then you can create one from this script with the following steps:</p><ul><li>Create a new directory called <code>eportal_puppet</code></li><li>Inside this directory, create a bolt project:<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>bolt project init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>Create a scripts directory inside it</li><li>Place the script above inside of it (call it <code>unregister_server.sh</code>)</li><li>Create the bolt plan using:<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>bolt plan new eportal_puppet::unregister_server --script eportal_puppet/scripts/unregister_server.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>Now your plan is ready and can be called directly with:<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>bolt plan run eportal_puppet:unregister_server -t &lt;TARGETS&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p>Ad hoc run example with:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>bolt plan run eportal_puppet::unregister_server -t 192.168.246.110
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This can be called during machine tear down to properly remove the server from ePortal.</p></div><div class="page-edit"><div class="edit-link"><img src="/global/pen.svg" alt="icon pen"><a href="https://github.com/cloudlinux/tuxcare-documentation/tree/master/docs/eportal-api/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div></div><div class="back-to-top" data-v-1eb13e00><a class="nav-arrow top back-to-top__link" data-v-1eb13e00><span class="back-to-top__link-span" data-v-1eb13e00>Scroll up</span></a></div><!--[--><!--]--></div><!----><div class="footer footer-default-layout" data-v-d0933a51><div class="footer__img" data-v-d0933a51><a href="https://tuxcare.com" data-v-d0933a51><img src="/global/we-are-cloudlinux.svg" data-v-d0933a51></a></div><div class="footer-company-title" data-v-d0933a51>2025. Cloud Linux Software Inc </div><div class="social" data-v-d0933a51><div class="social_links" data-v-d0933a51><!--[--><a href="https://cloudlinux.zendesk.com/hc/en-us/categories/360002375960-KernelCare" target="_blank" data-v-d0933a51>Knowledge base</a><a href="https://forum.cloudlinux.com/forum/tuxcare" target="_blank" data-v-d0933a51>Forum</a><a href="https://blog.tuxcare.com/" target="_blank" data-v-d0933a51>Blog</a><a href="https://www.cloudlinux.com/privacy-policy/" target="_blank" data-v-d0933a51>Privacy Policy</a><!--]--></div><span class="footer-social-text" data-v-d0933a51>Stay in touch</span><div class="social-icons-wrapper" data-v-d0933a51><!--[--><a class="social-icons-link" href="https://www.facebook.com/tuxcare/" target="_blank" data-v-d0933a51><img class="social-icons-link-img" src="/footer-social/fb.png" alt="footer logo" data-v-d0933a51></a><a class="social-icons-link" href="https://twitter.com/tuxcare_/" target="_blank" data-v-d0933a51><img class="social-icons-link-img" src="/footer-social/tw.png" alt="footer logo" data-v-d0933a51></a><a class="social-icons-link" href="https://linkedin.com/company/tuxcare" target="_blank" data-v-d0933a51><img class="social-icons-link-img" src="/footer-social/in.png" alt="footer logo" data-v-d0933a51></a><a class="social-icons-link" href="https://www.youtube.com/@TuxCare" target="_blank" data-v-d0933a51><img class="social-icons-link-img" src="/footer-social/ytube.png" alt="footer logo" data-v-d0933a51></a><!--]--></div></div></div></div><div id="bot-ui" data-v-20315ea7><!-- Conditionally show toggle button with highlight --><div class="toggle-container" style="" data-v-20315ea7><div class="pulse-ring" data-v-20315ea7></div><button class="chat-toggle" data-v-20315ea7><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="#ffffff" data-v-20315ea7><g id="SVGRepo_iconCarrier" data-v-20315ea7><path fill-rule="evenodd" clip-rule="evenodd" d="M8.48 4h4l.5.5v2.03h.52l.5.5V8l-.5.5h-.52v3l-.5.5H9.36l-2.5 2.76L6 14.4V12H3.5l-.5-.64V8.5h-.5L2 8v-.97l.5-.5H3V4.36L3.53 4h4V2.86A1 1 0 0 1 7 2a1 1 0 0 1 2 0 1 1 0 0 1-.52.83V4zM12 8V5H4v5.86l2.5.14H7v2.19l1.8-2.04.35-.15H12V8zm-2.12.51a2.71 2.71 0 0 1-1.37.74v-.01a2.71 2.71 0 0 1-2.42-.74l-.7.71c.34.34.745.608 1.19.79.45.188.932.286 1.42.29a3.7 3.7 0 0 0 2.58-1.07l-.7-.71zM6.49 6.5h-1v1h1v-1zm3 0h1v1h-1v-1z" data-v-20315ea7></path></g></svg></button><div class="highlight-container" data-v-20315ea7><div class="tooltip-text" data-v-20315ea7>Try our new Virtual Assistant!</div></div></div><!----></div><!--]--></div>
    <script type="module" src="/assets/app-3361cae0.js" defer></script>
  </body>
</html>
